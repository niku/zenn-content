---
title: "cdk initã§ç”Ÿæˆã•ã‚Œã‚‹cdk.jsonã®contextã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å€¤ãŒæ–‡å­—åˆ—ã‹ã‚‰boolã«ãªã£ãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’çŸ¥ã‚‹"
emoji: "ğŸ¦”"
type: "tech"
topics:
  - "git"
  - "cdk"
published: true
published_at: "2022-03-08 18:10"
---

```
npx cdk --version
2.15.0 (build 151055e)
npx cdk init app --language=typescript
```

ã§ç”Ÿæˆã—ãŸ `cdk.json` ã‚’çœºã‚ã‚‹ã€‚

```json
{
  "app": "npx ts-node --prefer-ts-exts bin/foo.ts",
  "watch": {
    "include": ["**"],
    "exclude": [
      "README.md",
      "cdk*.json",
      "**/*.d.ts",
      "**/*.js",
      "tsconfig.json",
      "package*.json",
      "yarn.lock",
      "node_modules",
      "test"
    ]
  },
  "context": {
    "@aws-cdk/aws-apigateway:usagePlanKeyOrderInsensitiveId": true,
    "@aws-cdk/core:stackRelativeExports": true,
    "@aws-cdk/aws-rds:lowercaseDbIdentifier": true,
    "@aws-cdk/aws-lambda:recognizeVersionProps": true,
    "@aws-cdk/aws-cloudfront:defaultSecurityPolicyTLSv1.2_2021": true,
    "@aws-cdk-containers/ecs-service-extensions:enableDefaultLogDriver": true,
    "@aws-cdk/aws-ec2:uniqueImdsv2TemplateName": true,
    "@aws-cdk/core:target-partitions": ["aws", "aws-cn"]
  }
}
```

`@aws-cdk/aws-apigateway:usagePlanKeyOrderInsensitiveId` ã®å€¤ã¯ `true` ã¨ bool å€¤ã«ãªã£ã¦ã„ã‚‹ã€‚ãµã¤ã†ã ã€‚å®Ÿã¯ã“ã®å€¤ã¯ä»¥å‰ `'true'` ã¨ã„ã†æ–‡å­—åˆ—ã§ã‚ã‚‰ã‚ã•ã‚Œã¦ã„ãŸã€‚

ãã‚Œã‚’ä¿®æ­£ã™ã‚‹ãŸã‚ã® [PR](https://github.com/aws/aws-cdk/pull/15629) ã‚’ä½œã£ãŸã“ã¨ãŒã‚ã‚‹ã€‚ãã® PR ã¯å–ã‚Šè¾¼ã¾ã‚Œãªã‹ã£ãŸã®ã ãŒã€çµæœã¨ã—ã¦ã¯ç§ã®é¡˜ã†æ–¹å‘ã«é€²ã‚“ã§ã„ã¦å–œã°ã—ã„ã€‚å½“æ™‚ã©ã®ã‚ˆã†ãªå½¢ã«ã—ã¦ã„ã‚Œã°ã€ã†ã¾ãå–ã‚Šè¾¼ã‚“ã§ã‚‚ã‚‰ãˆãŸã®ã‹ãªã‚ã¨ã„ã†ã®ã‚’çŸ¥ã‚‹ãŸã‚ã«ã€ã“ã®å¤‰æ›´ãŒã©ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§è¡Œã‚ã‚ŒãŸã‹ã‚’èª¿ã¹ãŸã€‚

ã‚ã‚‹å€¤ãŒå¤‰åŒ–ã—ãŸã‚³ãƒŸãƒƒãƒˆã‚’ã¿ã‚‹ã«ã¯ [git log ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ `-S`](https://git-scm.com/docs/git-log#Documentation/git-log.txt--Sltstringgt) ã‚’ä½¿ã†ã¨ä¾¿åˆ©ã ã€‚ä½™è«‡ã ãŒ -S ã¨ -G ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«ã¤ã„ã¦ã¯æ—¥æœ¬èªã ã¨[ã¤ã‚‹ã¯ã—ã§éå»ã‚’ç™ºæ˜ã™ã‚‹](https://qiita.com/hiratara/items/94d62f3678e9abcac82a) ãŒç§ã«ã¯ã¨ã¦ã‚‚ã‚ã‹ã‚Šã‚„ã™ã‹ã£ãŸã€‚

`git clone https://github.com/aws/aws-cdk.git` ã§ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³ã—ã¦
`git log -S "'true'" -p -- packages/@aws-cdk/cx-api/lib/features.ts` ã§çµæœã‚’çœºã‚ã‚‹ã¨

```
commit 999e99924804d8ee2c2962fa7ed86023b3f7d590
Author: Rico Huijbers <rix0rrr@gmail.com>
Date:   Mon Oct 18 11:10:24 2021 +0200

    chore(pipelines): deprecate legacy API (#17034)

    The presence of the legacy API for CDK Pipelines confuses people who
    didn't read the README or the blog post, but go from a copy/pasted
    example they found on the internet and then proceed to explore the API.

    Clearly deprecate the legacy classes to avoid confusion.


    ----

    *By submitting this pull request, I confirm that my contribution is made under the terms of the Apache-2.0 license*

diff --git a/packages/@aws-cdk/cx-api/lib/features.ts b/packages/@aws-cdk/cx-api/lib/features.ts
index 554c41929..986be7f4e 100644
--- a/packages/@aws-cdk/cx-api/lib/features.ts
+++ b/packages/@aws-cdk/cx-api/lib/features.ts
@@ -175,9 +175,9 @@ export const CLOUDFRONT_DEFAULT_SECURITY_POLICY_TLS_V1_2_2021 = '@aws-cdk/aws-cl
  */
 export const FUTURE_FLAGS: { [key: string]: any } = {
   [APIGATEWAY_USAGEPLANKEY_ORDERINSENSITIVE_ID]: true,
-  [ENABLE_STACK_NAME_DUPLICATES_CONTEXT]: 'true',
-  [ENABLE_DIFF_NO_FAIL_CONTEXT]: 'true',
-  [STACK_RELATIVE_EXPORTS_CONTEXT]: 'true',
+  [ENABLE_STACK_NAME_DUPLICATES_CONTEXT]: true,
+  [ENABLE_DIFF_NO_FAIL_CONTEXT]: true,
+  [STACK_RELATIVE_EXPORTS_CONTEXT]: true,
   [DOCKER_IGNORE_SUPPORT]: true,
   [SECRETS_MANAGER_PARSE_OWNED_SECRET_NAME]: true,
   [KMS_DEFAULT_KEY_POLICIES]: true,
```

ã¨ã„ã†å·®åˆ†ã‚’ã¿ã¤ã‘ãŸã€‚ã“ã¡ã‚‰ãŒå¯¾è±¡ã®ã‚³ãƒŸãƒƒãƒˆã®ã‚ˆã†ã ã€‚ã‚³ãƒŸãƒƒãƒˆãƒ­ã‚°ã‹ã‚‰ã¯ [PR #17034](https://github.com/aws/aws-cdk/pull/17034) ã‚’è¾¿ã‚Œã‚‹ã€‚PR ã«æ›¸ã„ã¦ã‚ã‚‹æ–‡ã¯ã‚³ãƒŸãƒƒãƒˆãƒ­ã‚°ã®

> The presence of the legacy API for CDK Pipelines confuses people who
> didn't read the README or the blog post, but go from a copy/pasted
> example they found on the internet and then proceed to explore the API.
>
> Clearly deprecate the legacy classes to avoid confusion.

ã¨åŒã˜ã ã€‚ã€Œãƒ¬ã‚¬ã‚·ãƒ¼ãª API ã‚’ depricated ã«ã™ã‚‹ã€ã¨ã„ã†ã‚³ãƒŸãƒƒãƒˆã®ã¨ãã«è¡Œã£ã¦ã„ãŸã€‚

ãŠã‚„ã£ã€ã‚³ãƒ¡ãƒ³ãƒˆã¨ã‚³ãƒŸãƒƒãƒˆã®å†…å®¹ã¯ä¸€è‡´ã—ã¦ã„ãªã„æ°—ãŒã™ã‚‹ãªã€‚ã“ã‚Œã§ã‚ˆã‹ã£ãŸã®ã‹ãªï¼Ÿ
ã¾ã‚ã€ã„ã„ã‹â€¦â€¦
